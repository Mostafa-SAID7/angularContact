<div class="min-h-screen bg-gray-100 flex flex-col">

  <!-- Header -->
  <header class="bg-indigo-600 text-white shadow-md">
    <div class="container mx-auto px-6 py-4 flex justify-between items-center">
      <h1 class="text-3xl font-bold tracking-tight">Hello World</h1>
      <nav class="flex items-center space-x-4">
        <a routerLink="/" class="hover:underline hover:text-indigo-200 transition">Home</a>
        <a routerLink="/about" class="hover:underline hover:text-indigo-200 transition">About</a>
        <a routerLink="/contact" class="hover:underline hover:text-indigo-200 transition">Contact</a>
        
        <!-- User Profile (if logged in) -->
        <div *ngIf="userData" class="flex items-center space-x-2 ml-4">
          <span class="text-sm">Welcome, {{userData.name}}</span>
          <div class="w-8 h-8 bg-indigo-800 rounded-full flex items-center justify-center">
            {{userData.name?.charAt(0) || 'U'}}
          </div>
        </div>

        <!-- Refresh Button -->
        <button 
          (click)="refreshData()"
          [disabled]="isLoading"
          class="px-3 py-1 bg-indigo-700 rounded hover:bg-indigo-800 transition disabled:opacity-50">
          <span *ngIf="!isLoading">â†» Refresh</span>
          <span *ngIf="isLoading">Loading...</span>
        </button>
      </nav>
    </div>
  </header>

  <!-- Main content -->
  <main class="flex-1 container mx-auto px-6 py-10">
    <router-outlet></router-outlet>

    <!-- Error Alert -->
    <div *ngIf="error" class="mb-6 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative">
      <strong class="font-bold">Error: </strong>
      <span class="block sm:inline">{{error}}</span>
      <button (click)="error = null" class="absolute top-0 right-0 px-4 py-3">
        <span class="text-2xl">&times;</span>
      </button>
    </div>

    <!-- Loading Spinner -->
    <div *ngIf="isLoading && features.length === 0" class="flex justify-center items-center py-20">
      <div class="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-indigo-600"></div>
    </div>

    <!-- Feature Cards Section -->
    <section *ngIf="!isLoading || features.length > 0" 
             class="mt-10 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
      
      <div *ngFor="let feature of features" 
           class="bg-white rounded-xl shadow-lg p-6 hover:shadow-2xl transition duration-300 transform hover:-translate-y-1">
        <h2 class="text-xl font-semibold mb-2">{{feature.title}}</h2>
        <p class="text-gray-600 mb-4">{{feature.description}}</p>
        <button 
          (click)="onLearnMore(feature)"
          [ngClass]="getButtonColorClass(feature.color)"
          class="text-white px-4 py-2 rounded transition">
          Learn More
        </button>
      </div>
    </section>

    <!-- Empty State -->
    <div *ngIf="!isLoading && features.length === 0 && !error" 
         class="text-center py-20">
      <p class="text-gray-500 text-lg">No features available at the moment.</p>
      <button 
        (click)="refreshData()"
        class="mt-4 bg-indigo-600 text-white px-6 py-2 rounded hover:bg-indigo-500 transition">
        Retry
      </button>
    </div>
  </main>

  <!-- Footer -->
  <footer class="bg-gray-800 text-gray-200 py-6 mt-auto">
    <div class="container mx-auto px-6 text-center">
      <p>&copy; 2025 My Angular + Tailwind App. All rights reserved.</p>
      <p class="text-sm text-gray-400 mt-2">Powered by ASP.NET Core API</p>
    </div>
  </footer>

</div>
